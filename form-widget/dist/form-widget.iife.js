(function(e){"use strict";const d=(t,r)=>{const n=t.__vccOpts||t;for(const[l,o]of r)n[l]=o;return n},s={key:0},m=["placeholder","required","disabled"],u=d({__name:"FieldText",props:{field:{type:Object,required:!0},renderMode:{type:String,default:"runtime"}},setup(t){return(r,n)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["field",`mode-${t.renderMode}`])},[t.renderMode!=="palette"?(e.openBlock(),e.createElementBlock("label",s,e.toDisplayString(t.field.label),1)):e.createCommentVNode("",!0),e.createElementVNode("input",{class:"input",type:"text",placeholder:t.field.placeholder,required:t.field.required,disabled:t.renderMode!=="runtime"},null,8,m)],2))}},[["__scopeId","data-v-5d3585fa"]]),f={class:"field"},p={class:"lbl"},_=["placeholder","required"],b=d({__name:"FieldNumber",props:{field:{type:Object,required:!0}},setup(t){return(r,n)=>(e.openBlock(),e.createElementBlock("div",f,[e.createElementVNode("label",p,e.toDisplayString(t.field.label),1),e.createElementVNode("input",{class:"input",type:"number",placeholder:t.field.placeholder,required:t.field.required},null,8,_)]))}},[["__scopeId","data-v-88ff145e"]]),h={key:0},y=["placeholder","required","disabled"],k=d({__name:"FieldEmail",props:{field:{type:Object,required:!0},renderMode:{type:String,default:"runtime"}},setup(t){return(r,n)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["field",`mode-${t.renderMode}`])},[t.renderMode!=="palette"?(e.openBlock(),e.createElementBlock("label",h,e.toDisplayString(t.field.label),1)):e.createCommentVNode("",!0),e.createElementVNode("input",{class:"input",type:"email",placeholder:t.field.placeholder,required:t.field.required,disabled:t.renderMode!=="runtime"},null,8,y)],2))}},[["__scopeId","data-v-ecf717ed"]]),g={class:"field"},$=["placeholder","required"],B=d({__name:"FieldPassword",props:{field:{type:Object,required:!0}},setup(t){return(r,n)=>(e.openBlock(),e.createElementBlock("div",g,[e.createElementVNode("label",null,e.toDisplayString(t.field.label),1),e.createElementVNode("input",{class:"input",type:"password",placeholder:t.field.placeholder,required:t.field.required},null,8,$)]))}},[["__scopeId","data-v-a1b2a282"]]),E={key:0},F=["placeholder","required","disabled"],q=d({__name:"FieldTextArea",props:{field:{type:Object,required:!0},renderMode:{type:String,default:"runtime"}},setup(t){return(r,n)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["field",`mode-${t.renderMode}`])},[t.renderMode!=="palette"?(e.openBlock(),e.createElementBlock("label",E,e.toDisplayString(t.field.label),1)):e.createCommentVNode("",!0),e.createElementVNode("input",{class:"input",type:"text",placeholder:t.field.placeholder,required:t.field.required,disabled:t.renderMode!=="runtime"},null,8,F)],2))}},[["__scopeId","data-v-06a6bd47"]]),S={class:"field field-button"},x=["disabled"],w={text:u,number:b,email:k,password:B,textarea:q,button:d({__name:"FieldButton",props:{field:{type:Object,required:!0}},setup(t){return(r,n)=>(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("button",{class:"button",type:"button",disabled:t.field.disabled},e.toDisplayString(t.field.text),9,x)]))}},[["__scopeId","data-v-9e8181a1"]])},N=d({__name:"FormRenderer",props:{fields:{type:Array,required:!0},settings:{type:Object,default:()=>({})},meta:{type:Object,default:()=>({})},submitUrl:{type:String,default:null}},setup(t){const r=t,n=e.reactive({});async function l(){if(!r.submitUrl){console.warn("[FormWidget] submitUrl not provided");return}try{const o=await fetch(r.submitUrl,{method:r.settings?.submitMethod||"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok)throw new Error("Submit failed");const a=await o.json();console.log("[FormWidget] Submission OK:",a)}catch(o){console.error("[FormWidget] Submission error:",o)}}return(o,a)=>(e.openBlock(),e.createElementBlock("form",{class:"sheet",onSubmit:e.withModifiers(l,["prevent"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.fields,i=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(w)[i.type]),{key:i.id,field:i,modelValue:n[i.name],"onUpdate:modelValue":M=>n[i.name]=M},null,8,["field","modelValue","onUpdate:modelValue"]))),128))],32))}},[["__scopeId","data-v-40270cc1"]]);async function V({selector:t,brand:r,formKey:n,apiBase:l}){const o=`${l}/form-engine/public/${r}/${n}/`,a=await fetch(o);if(!a.ok){console.error("[FormWidget] Error loading form");return}const i=await a.json();c(t,i)}function c(t,r){const n=document.querySelector(t);if(!n){console.warn("[FormWidget] Container not found:",t);return}const l=r?.schema||[];if(!Array.isArray(l)||!l.length){console.warn("[FormWidget] Empty or invalid schema");return}e.createApp(N,{fields:l,settings:r.settings||{},meta:r.meta||{}}).mount(n)}window.FormWidget={mount:c,load:V}})(Vue);
